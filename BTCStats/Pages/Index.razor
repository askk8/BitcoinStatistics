@page "/"
@inject HttpClient client
@using Newtonsoft.Json
@using Data
<div class="container-fluid">
    <div class="row justify-content-center" style="margin-bottom:50px">
        <h3 class="text-center">Calling REST-APIs</h3>
    </div>
    <div class="row" style="margin:25px;">
        <strong>Get Operation </strong><hr />
        @if (Users != null)
        {
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th>Id</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Avatar</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Users)
                    {
                        <tr class="justify-content-center">
                            <td>@user.Name</td>

                        </tr>
                    }
                </tbody>
            </table>
        }
        @if (!Users.Any())
        {
            <div class="justify-content-center">
                <h5>No records to show</h5>
            </div>
        }
    </div>
    <div class="row" style="margin:10px;margin-bottom:50px;">
        <div class="col"><button class="btn btn-info" @onclick="GetUser">Get Users</button></div>
    </div>
</div>
@code {
    List<ApiResponse> Users = new List<ApiResponse>();
    private async void GetUser()
    {
        var apiName = "api/v3/coins/ethereum/history?date=16-09-2020";
        var httpResponse = await client.GetAsync(apiName);
        string jsonstring = JsonConvert.SerializeObject(await httpResponse.Content.ReadAsStringAsync());
        if (httpResponse.IsSuccessStatusCode)
        {
            ApiResponse responseData = JsonConvert.DeserializeObject<ApiResponse>(jsonstring);
            //Users = responseData;
            StateHasChanged();
        }
    }
    bool ShowUpdateDeleteForm = true;
    private void ShowHideDeleteUserForm()
    {
        ShowUpdateDeleteForm = !ShowUpdateDeleteForm;
    }
}